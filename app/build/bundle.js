!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="build/",a(a.s=5)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("nfc-pcsc")},function(e,t){e.exports=require("node-fetch")},function(e,t){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(1),c=a(2),d=a(3),i=a.n(d);var l=e=>n.a.createElement(n.a.Fragment,null,e.readers.length?function(e){return e.map(e=>n.a.createElement("div",{className:"card",key:e},n.a.createElement("div",{className:"card__content"},e)))}(e.readers):n.a.createElement("div",{className:"card card--empty"},n.a.createElement("div",{className:"card__content"},"None detected")));var o=e=>n.a.createElement(n.a.Fragment,null,e.ids.length?function(e,t){return e.map(e=>n.a.createElement("div",{className:"card",key:e},n.a.createElement("div",{className:"card__header"},"#",e),n.a.createElement("div",{className:"card__content"},t[e].data?t[e].data:"Unable to read data")))}(e.ids,e.data):n.a.createElement("div",{className:"card card--empty"},n.a.createElement("div",{className:"card__content"},"None detected"))),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var m=class extends n.a.Component{constructor(e){super(e),this.state={readers:[],cards:{},cardIds:[],url:"http://localhost:8000"},this.onInputChange=this.onInputChange.bind(this)}componentWillMount(){(new c.NFC).on("reader",e=>{this.handleReaderOn(e),e.on("card",t=>{this.handleCardOn(e,t)}),e.on("card.off",e=>{this.handleCardOff(e)}),e.on("end",()=>{this.handleReaderOff(e)})})}handleReaderOn(e){this.state.readers.includes(e.reader.name)||this.setState({readers:[...this.state.readers,e.reader.name]})}handleReaderOff(e){this.setState({readers:this.state.readers.filter(t=>t!==e.reader.name)})}async handleCardOn(e,t){let a={id:t.uid};try{const t=(await e.read(7,100)).toString("utf8").replace(/\uFFFD/g,"").substr(2);a.data=t}catch(e){}if(!this.state.cardIds.includes(a.id)){this.setState({cardIds:[...this.state.cardIds,a.id],cards:u({},this.state.cards,{[a.id]:a})});const e=`${this.state.url}/intuiface/sendMessage?message=removed&parameter1=${a.id}&parameter2=${a.data}`;i()(e)}}handleCardOff(e){let t={};Object.keys(this.state.cards).forEach(a=>{a!==e.uid&&(t[a]=this.state.cards[a])}),this.setState({cardIds:this.state.cardIds.filter(t=>t!==e.uid),cards:t})}onInputChange(e){this.setState({url:e.target.value})}render(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"container__top"},n.a.createElement("div",{className:"section"},n.a.createElement("h4",null,"Connected readers"),n.a.createElement(l,{readers:this.state.readers})),n.a.createElement("div",{className:"section"},n.a.createElement("h4",null,"Detected cards"),n.a.createElement(o,{ids:this.state.cardIds,data:this.state.cards}))),n.a.createElement("div",{className:"container__bottom"},n.a.createElement("h4",null,"Intuiface server"),n.a.createElement("input",{type:"text",onChange:this.onInputChange,value:this.state.url})))}};a(4);Object(s.render)(n.a.createElement(m,null),document.getElementById("app"))}]);